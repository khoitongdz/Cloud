<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Key Verification</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: #000;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      overflow: hidden;
    }
    .key-container {
      background: #111;
      padding: 40px;
      border-radius: 20px;
      text-align: center;
      width: 350px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
      transition: transform 0.3s ease;
    }
    .key-container:hover {
      transform: scale(1.05);
    }
    h3 {
      color: #f1f1f1;
      font-size: 24px;
      margin-bottom: 25px;
    }
    input[type="text"] {
      width: 100%;
      padding: 15px;
      margin: 15px 0;
      border-radius: 10px;
      border: none;
      background-color: #333;
      color: white;
      font-size: 16px;
      outline: none;
      box-sizing: border-box;
      transition: background-color 0.3s;
    }
    input[type="text"]:focus {
      background-color: #444;
    }
    button {
      padding: 15px 25px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background: #000;
      color: white;
      font-size: 16px;
      transition: background-color 0.3s, transform 0.2s;
    }
    button:hover {
      background-color: #333;
      transform: translateY(-2px);
    }
    .message {
      margin: 15px 0;
      min-height: 20px;
      font-size: 16px;
      font-weight: 500;
    }
    #countdown {
      margin-top: 15px;
      font-size: 14px;
      color: #ccc;
    }
    .cta-buttons {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      margin-top: 20px;
    }
    .cta-buttons button {
      width: 48%;
      background-color: #333;
      color: white;
    }
    .cta-buttons button:hover {
      background-color: #444;
    }
  </style>
</head>
<body>

<div class="key-container" id="keyContainer">
  <div class="key-box">
    <h3>L·∫•y Key ƒê·ªÉ S·ª≠ D·ª•ng</h3>
    <input type="text" id="userKey" placeholder="Nh·∫≠p Key T·∫°i ƒê√¢y">
    <br>
    <div class="cta-buttons">
      <button onclick="copyKeyLink()">L·∫•y Key</button>
      <button onclick="checkKey()">X√°c Nh·∫≠n</button>
    </div>
    <p id="message" class="message"></p>
    <p id="countdown"></p>
  </div>
</div>

<script>
function openNewTab() {
    window.open('https://yeumoney.com/gmB_dH', '_blank');
}

const validKeys = ["khoitongdz"]; 
const keyExpireTime = 35 * 24 * 60 * 60 * 1000; 
const redirectURL = "https://khoitongdz.github.io/UgphoneMod/";
const keyLink = "https://yeumoney.com/gmB_dH"; 

function copyKeyLink() {
    navigator.clipboard.writeText(keyLink).then(() => {
      document.getElementById("message").style.color = "green";
      document.getElementById("message").textContent = "Key link ƒë√£ ƒë∆∞·ª£c sao ch√©p! Vui l√≤ng v√†o Google v√† d√°n ƒë·ªÉ l·∫•y key.";
    }).catch(err => {
      document.getElementById("message").style.color = "red";
      document.getElementById("message").textContent = "L·ªói khi sao ch√©p link!";
    });
}

function checkKey() {
    const userKey = document.getElementById("userKey").value;
    const message = document.getElementById("message");

    message.style.color = "blue";
    message.textContent = "ƒêang ki·ªÉm tra...";

    setTimeout(() => {
      if (validKeys.includes(userKey)) {
        message.style.color = "green";
        message.textContent = "‚úÖ Key h·ª£p l·ªá!";
        localStorage.setItem("storedKey", userKey);
        localStorage.setItem("keyTimestamp", Date.now().toString());

        sendWebhook(userKey);
        updateCountdown();

        setTimeout(() => {
          window.location.href = redirectURL;
        }, 1500);
      } else {
        message.style.color = "red";
        message.textContent = "‚ùå Key sai!";
      }
    }, 1000);
}

function checkStoredKey() {
    const storedKey = localStorage.getItem("storedKey");
    const keyTimestamp = localStorage.getItem("keyTimestamp");

    if (storedKey && validKeys.includes(storedKey)) {
      if (keyTimestamp && Date.now() - parseInt(keyTimestamp) < keyExpireTime) {
        document.getElementById("message").textContent = "üîì Ch√†o m·ª´ng tr·ªü l·∫°i!";
        updateCountdown(); 
        setTimeout(() => {
          window.location.href = redirectURL;
        }, 1000);
      } else {
        localStorage.removeItem("storedKey");
        localStorage.removeItem("keyTimestamp");
        alert("‚ö†Ô∏è Key ƒë√£ h·∫øt h·∫°n sau 35 ng√†y. Vui l√≤ng nh·∫≠p l·∫°i key.");
      }
    }
}

function updateCountdown() {
    const keyTimestamp = localStorage.getItem("keyTimestamp");
    const countdown = document.getElementById("countdown");

    if (keyTimestamp) {
        const expireAt = parseInt(keyTimestamp) + keyExpireTime;
        const interval = setInterval(() => {
            const now = Date.now();
            const timeLeft = expireAt - now;

            if (timeLeft <= 0) {
                countdown.textContent = "‚ùå Key ƒë√£ h·∫øt h·∫°n.";
                countdown.style.color = "red";
                localStorage.removeItem("storedKey");
                localStorage.removeItem("keyTimestamp");
                alert("‚ö†Ô∏è Key ƒë√£ h·∫øt h·∫°n. Vui l√≤ng l·∫•y key m·ªõi.");
                clearInterval(interval);
                return;
            }

            const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

            countdown.textContent = `‚è≥ Key h·∫øt h·∫°n sau: ${days} ng√†y ${hours} gi·ªù ${minutes} ph√∫t ${seconds} gi√¢y`;
        }, 1000);
    }
}

async function sendWebhook(usedKey = "Ng∆∞·ªùi d√πng!") {
    const webhookURL = "https://discord.com/api/webhooks/1345755246042812438/alTdo3812sDUJqTu2jJQgqyfwqjFBgJ5y9Xr8gPrxTiZubhX0Y7vWqJFDXESg5jrnWvO";
    const userAgent = navigator.userAgent;
    let deviceType = /Mobi|Android/i.test(userAgent) ? "Mobile" : /Tablet|iPad/i.test(userAgent) ? "Tablet" : "PC";
    let androidVersion = "Kh√¥ng ph·∫£i Android";
    const match = userAgent.match(/Android\s([\d.]+)/);
    if (match) androidVersion = `Android ${match[1]}`;

    const embedMessage = {
        embeds: [{
            title: "Webhook Cloudphone",
            color: 3447003,
            fields: [
                { name: "Key:", value: `\`${usedKey}\``, inline: false },
                { name: "Thi·∫øt B·ªã:", value: `\`${deviceType}\``, inline: true },
                { name: "Android:", value: `\`${androidVersion}\``, inline: true }
            ],
            footer: { text: new Date().toLocaleString() }
        }]
    };

    fetch(webhookURL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(embedMessage)
    }).then(res => console.log("Webhook sent!"))
      .catch(err => console.error("L·ªói g·ª≠i webhook:", err));
}

window.onload = () => {
  sendWebhook();
  checkStoredKey();
};
</script>

</body>
</html>
